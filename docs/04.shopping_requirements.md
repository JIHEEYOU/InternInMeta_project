# 🛍 쇼핑몰 연동 요구사항 분석 및 기능 목록

---

## 📌 기본 정보
- **프로젝트명**: 패션 쇼핑몰 연동
- **사용 기술(예시)**: React, TypeScript, React Query, Node.js(Express), MariaDB, REST API, OAuth2
- **문서 작성자**: 김준우, 오지원
- **작성/개정 이력**: 2025-08-24 v1.0

> 본 문서는 요구사항의 **명확성 / 검증가능성 / 일관성 / 추적성** 확보를 목표로 하며 (ISO/IEC/IEEE 29148),  
> 사용자 스토리(User Story) + 수용 기준(AC, Acceptance Criteria) 중심으로 기술합니다.  
> 참고: ISO · SEBoK · IEEE Standards Association

---

## 📝 고객 요구사항 정리 (요약)

- **페이지 연동**  
  홈 → 목록(카테고리·브랜드) → 상세 → 장바구니 → 결제 → 결제완료 플로우 일관 유지  
  뒤로가기 시 필터/스크롤 복구  

- **데이터 일관성**  
  장바구니·주문·결제 트랜잭션 원자성 보장  
  멱등성 키(Idempotency-Key) 기반 중복 주문 방지  

- **상세 페이지**  
  재고/가격/옵션(색상·사이즈)/배송·반품정책/후기·평점/연관 추천 노출  

- **브랜드 상품**  
  브랜드 홈 / 필터 / 모아보기(A–Z), 브랜드 스토리 배너·쿠폰  

- **결제 완료 페이지**  
  주문 요약·배송지·결제수단·영수증 제공, 후행 CTA(주문조회/재구매/추천상품)  

- **접근성/성능/SEO**  
  WCAG 2.1 AA, LCP·CLS 지표 개선, 메타/구조화데이터 적용  

> 체크아웃·주문확인 페이지의 핵심 구성과 후행 행동(재구매·추천)은 **UX 베스트 프랙티스**에 기반합니다.  
> 출처: Baymard Institute, Nielsen Norman Group  
> 결제·주문 영역은 재시도/중복 요청에 대비한 **멱등성 설계**가 필수입니다.  
> 출처: Stripe Docs, DEV Community

---

## 📋 기능 목록 (User Stories & Acceptance Criteria)

### 1) 페이지 연동 (홈/목록/상세/장바구니/결제/완료)

- **US-001** 홈에서 카테고리/브랜드로 이동해 상품 목록을 본다.  
  **AC**
  - [ ] 홈 → 카테고리/브랜드 클릭 시 목록 2초 내 렌더
  - [ ] 뒤로가기 시 필터·정렬·스크롤 상태 복구

- **US-002** 목록에서 필터·정렬 후 상세로 진입한다.  
  **AC**
  - [ ] 가격/색상/사이즈 복합 필터, 인기/신상품/가격↑↓ 정렬
  - [ ] 상세 진입 후 뒤로가기 시 이전 상태 유지

- **US-003** 상세에서 옵션/수량 선택 후 장바구니에 담는다.  
  **AC**
  - [ ] 옵션 미선택 시 담기 버튼 비활성
  - [ ] 담기 성공 시 토스트 표시 및 페이지 잔류

- **US-004** 장바구니에서 수량 변경/삭제/선택 결제를 수행한다.  
  **AC**
  - [ ] 재고 부족 시 경고 및 수량 자동 조정
  - [ ] 선택 항목만 결제 플로우로 이동

- **US-005** 결제에서 배송지/결제수단 입력 후 주문을 완료한다.  
  **AC**
  - [ ] 게스트 결제 지원
  - [ ] 카드·간편결제 제공
  - [ ] 결제 요청 재시도 시 **멱등성 키**로 중복 주문 방지

- **US-006** 결제 완료 페이지에서 주문 요약/영수증을 확인한다.  
  **AC**
  - [ ] 주문번호/일시/수신자/주소/결제수단/합계 노출
  - [ ] “주문 상세”, “배송 조회”, “추천상품” CTA 제공
  - [ ] 영수증 인쇄/이메일 제공

---

### 2) 데이터 일관성 & 멱등성

**요구사항**
- 주문·결제 API는 멱등성 보장(중복 클릭/네트워크 재시도 대비)
- 동일 Idempotency-Key 재요청 시 동일 결과 반환
- 결제 실패 시 주문 롤백·재고 복구

**AC**
- [ ] `POST /api/orders`, `POST /api/payments/confirm`는 Idempotency-Key 지원
- [ ] 동일 키로 60초 내 재시도 시 같은 `orderId` / `paymentId` 반환
- [ ] 승인 실패 시 상태 일관성 보장 (트랜잭션/보상 트랜잭션)

---

### 3) 상세 페이지 요구

- **필수 노출**: 가격(정가/할인), 재고, 옵션(색상·사이즈), 배송비/도착예상, 반품/교환 정책, 후기·평점, 연관 추천  
- **상호작용**: 이미지 확대/스와이프, 즐겨찾기, 옵션 유효성 검사  

**AC**
- [ ] 옵션 조합이 불가하면 비활성 처리 및 사유 안내
- [ ] 구조화 데이터(Product/Offer) 포함 (SEO)

---

### 4) 브랜드 관련 상품 기능

- **브랜드 홈**: 로고, 설명, 배너, 대표 컬렉션  
- **브랜드 필터**: 목록에서 `brand=...` 다중 선택  
- **브랜드 모아보기**: A–Z 인덱스·검색·팔로우(알림)  

**AC**
- [ ] 브랜드 홈에 신상품/세일/베스트 탭 제공
- [ ] 브랜드 스토리 배너·룩북/캠페인 링크 표시
- [ ] 브랜드 쿠폰/프로모션 적용 경로 제공

---

### 5) 결제 완료 (주문확인) 페이지

**요구사항**
- 주문 요약, 배송정보, 결제수단, 영수증 제공
- 후행 CTA: 주문조회, 재구매, 추천상품  

**AC**
- [ ] 주문 상태 업데이트(폴링/푸시)
- [ ] 재구매 버튼(장바구니 직행)
- [ ] 추천 위젯(최근 본/동일 브랜드/유사 카테고리)

---

## 🔗 페이지 플로우 & URL 규칙


- **URL 예시**
  - `/b/{brandSlug}`
  - `/c/{catSlug}`
  - `/p/{productId}-{slug}`
  - 예: `/c/outer?sort=popular&color=blue&size=M&page=2`

---

## 🧩 데이터 모델 (요약)

- **Product**: `id, name, brandId, price, salePrice, options[], images[], stockByOption, tags[]`
- **Brand**: `id, name, slug, description, heroImage, isFeatured`
- **Cart**: `id, userId/anonId, items[{productId, optionKey, qty, priceSnapshot}], updatedAt`
- **Order**: `id, userId, items[], totals, shippingAddress, status, createdAt`
- **Payment**: `id, orderId, method, amount, status, transactionId, idempotencyKey`

---

## 🛠️ API 계약 (요약)

### 장바구니 담기
```http
POST /api/cart/items
Body: { productId, optionKey, qty }
Resp: { cartId, items[], total }
Errors: 409 OUT_OF_STOCK, 400 INVALID_OPTION
